<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Admin Dashboard • Smart Attendance</title>
<link rel="stylesheet" href="styles.css">
<script defer src="app.js"></script>
</head>
<body>
<div class="app">
  <aside class="sidebar" id="sidebar">
    <div class="brand">🕒 AttendanceHub</div>
    <ul class="nav">
      <li><a href="#" class="active" data-target="a-dashboard">📊 Dashboard</a></li>
      <li><a href="#" data-target="a-employees">👥 Employees</a></li>
      <li><a href="#" data-target="a-attendance">🗓️ Attendance</a></li>
      <li><a href="#" data-target="a-leaves">📝 Leave Requests</a></li>
      <li><a href="#" data-target="a-settings">⚙️ Settings</a></li>
    </ul>
    <div class="spacer"></div>
    <div class="logout" onclick="logout()">🚪 Logout</div>
  </aside>

  <main class="main">
    <div class="topbar">
      <div class="top-left">
        <button class="icon-btn" onclick="toggleSide()">☰</button>
        <h1>Admin</h1>
      </div>
      <div class="top-actions">
        <button class="icon-btn" onclick="toggleTheme()">🌗</button>
      </div>
    </div>

    <!-- SECTION: Dashboard -->
    <section id="a-dashboard" class="section active">
      <div class="grid kpis">
        <div class="card"><h3>Employees Checked-in Today</h3><div class="big" id="kpiPresent">0</div></div>
        <div class="card"><h3>Average Working Hours</h3><div class="big" id="kpiAvg">0</div></div>
        <div class="card"><h3>Pending Leave Requests</h3><div class="big" id="kpiPending">0</div></div>
        <div class="card"><h3>Attendance Compliance</h3><div class="big" id="kpiCompliance">0%</div></div>
      </div>
    </section>

    <!-- SECTION: Employees -->
    <section id="a-employees" class="section">
      <div class="card">
        <h3>Employees</h3>
        <div class="row">
          <input class="input" id="empSearch" placeholder="Search by name or email" oninput="renderEmployeeTable()">
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Status</th></tr></thead>
            <tbody id="adminEmployeesTbody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- SECTION: Attendance -->
    <section id="a-attendance" class="section">
      <div class="card">
        <h3>Attendance Logs</h3>
        <div class="row">
          <input class="input" type="date" id="attFrom">
          <input class="input" type="date" id="attTo">
          <input class="input" id="attByEmail" placeholder="Filter by email">
          <button class="btn-sm btn-outline" onclick="renderAdminAttendance()">Apply Filters</button>
          <button class="btn-sm" onclick="exportCSV()">Export CSV</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Date</th><th>Email</th><th>Name</th><th>Check-In</th><th>Check-Out</th><th>Total (h)</th></tr></thead>
            <tbody id="adminAttendanceTbody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- SECTION: Leaves -->
    <section id="a-leaves" class="section">
      <div class="card">
        <h3>Leave Requests</h3>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Employee</th><th>Email</th><th>Reason</th><th>Date</th><th>Status</th><th>Action</th></tr></thead>
            <tbody id="adminLeavesTbody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- SECTION: Settings -->
    <section id="a-settings" class="section">
      <div class="grid">
        <div class="card">
          <h3>Backup & Restore</h3>
          <div class="row">
            <button class="btn-sm" onclick="backupJSON()">Download Backup</button>
            <label class="btn-sm btn-outline" style="display:inline-block;cursor:pointer">
              Restore JSON <input type="file" accept="application/json" onchange="restoreJSON(event)" style="display:none">
            </label>
          </div>
        </div>
      </div>
    </section>

  </main>
</div>
</body>
</html>
